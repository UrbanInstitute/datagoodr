# Data type functions for 01 and 03 steps

All layouts and the required functions are found in R/03-01-layouts.R

## List of functions each data type needs in the rg_stats and rg_graphics

`get_properties` , `get_examples` and `get_[stats/graphics]_[datatype]` are in R/01-03-get-stats.R.

`get_graphics_[datatype]` are in R/01-03-get-graphics.R.

For every data type, rg_properties has the following in two columns( val and per) from the `get_properties` function:

-   Rows

-   distinct

-   Most common value

-   zero

-   all empty

-   missing/NA

-   infinite

Every data type has a `get_examples` function that pastes the data values that will be used in the data preview section as a text string in json format. This function is not needed for logical or factors (the examples is clear from the stats table and graphics plot.

All `get_[stats/graphics]_[datatype]` functions below take in the variable name, gets that variable's data from the data set, calculates the respective values, then outputs a table formatted as a json object as a character string to paste in the rg\_[stats/graphics] column to the DGF. .

+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Data Type | rg_stats (R/all in 01-03-get-stats.R)                                                                                                                       | rg_graphics (R/all in 01-03-get-graphics.R)                                                                                                                                                                                               |
+===========+=============================================================================================================================================================+===========================================================================================================================================================================================================================================+
| character | stats is on the number of words/characters in each character string. the `get_stats_chr`function in calculates the following things all in the one function | graphic is a word cloud. The `get_graphics_chr` function takes in all character strings, then takes makes a table of the most common 100 words and their frequencies                                                                      |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   minimum                                                                                                                                                 |                                                                                                                                                                                                                                           |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   median                                                                                                                                                  |                                                                                                                                                                                                                                           |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   mean                                                                                                                                                    |                                                                                                                                                                                                                                           |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   max                                                                                                                                                     |                                                                                                                                                                                                                                           |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   skew                                                                                                                                                    |                                                                                                                                                                                                                                           |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   histogram (using `spec_hist` html code can be stored as a character string that is then recreated as a histogram in the kable)                          |                                                                                                                                                                                                                                           |
+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| logical   | `get_stats_log` calculates the frequency of the two values and puts it in a table of 2 rows (3 if there are NA's)                                           | `get_graphics_log` calculates the same thing as `get_stats_log` (this could probably be streamlined to remove the redundency later, but for now I'm leaving it as is).                                                                    |
+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| numeric   | `get_stats_num` calculates                                                                                                                                  | `get_graphics_num` makes a histogram and calculates the bin locations and bin heights, as well as min/med/mean/max for plotting the axis . The min/med/mean/max could be pulled from the rg_stats, but again this is left this for later. |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   min                                                                                                                                                     |                                                                                                                                                                                                                                           |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   q05, q25, q50, q75, q95                                                                                                                                 |                                                                                                                                                                                                                                           |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   mean                                                                                                                                                    |                                                                                                                                                                                                                                           |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   max                                                                                                                                                     |                                                                                                                                                                                                                                           |
|           |                                                                                                                                                             |                                                                                                                                                                                                                                           |
|           | -   skew                                                                                                                                                    |                                                                                                                                                                                                                                           |
+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Factor    | `get_stats_fact` calculates the 5 most common factor categories and their associated counts                                                                 | `get_graphics_fact` calculates the frequency of each unique character string. If a character string has less than 2% frequency, it is put into an "other" category.                                                                       |
+-----------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

## List of function each data type needs in the paste\_[stats/graphics/preview/properties]\_[datatype] in the RG rendering

`paste_properties` and `paste_stats_[datatype]` functions are in R/03-00-BUILD-RG-DICT.R.

The `paste_properties` function works for all data types and the `get_properties` is the same for all data types.

The `paste_preview_[num/chr]` functions pastes 10 of the examples from `get_examples`.

The `paste_stat_[datatype]` functions pastes the table of the associated values from `get_stats_datatype`.

The following `paste_[graphics]` functions are:

| paste_graphics function | variable type | output                                                                                                                                                                      | file location       |
|-------------------------|---------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| `paste_booleplot`       | logical       | boolean plot (bar plot with 2 categories and NA's if present)                                                                                                               | R/03-02-booleplot.R |
| `paste_histogram`       | numeric       | histogram - some windsorizing is done if the skew is too high. median and mean are attempted to be pasted onto the plot, but they may not be if the plot is too windsorized | R/03-02-histogram.R |
| `paste_treemap`         | factor        | treemap with (max) 50 categories. Any category with less than 2% frequency is put into the "other" category.                                                                | R/03-02-treemap.R   |
| `paste_wordcloud`       | character     | wordcloud - the scaling on this is not perfect, but it works for now                                                                                                        | R/03-02-wordcloud.R |
